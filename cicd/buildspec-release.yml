version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.7
    commands:
      - apt update
      - apt-get install -y curl
      - curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | sh
      - source /root/.nvm/nvm.sh
      - nvm install node 12.16.1
      - nvm use 12.16.1
  pre_build:
    commands:
    - |
      npm install -g semantic-release \
      @semantic-release/changelog \
      @semantic-release/commit-analyzer \
      @semantic-release/exec \
      @semantic-release/git \
      @semantic-release/release-notes-generator
  build:
    env:
      - parameter_store:
        GITHUB_TOKEN: "/dvp/devops/va_bot_github_token"
    commands:
      - npx semantic-release --dry-run
  post_build:
    commands:
